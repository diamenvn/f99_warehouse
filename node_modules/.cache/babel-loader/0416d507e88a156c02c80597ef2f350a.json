{"ast":null,"code":"import _toConsumableArray from\"/Users/dante/Documents/SOURCE CODE/myteam/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/toConsumableArray\";import _classCallCheck from\"/Users/dante/Documents/SOURCE CODE/myteam/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"/Users/dante/Documents/SOURCE CODE/myteam/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";import _createSuper from\"/Users/dante/Documents/SOURCE CODE/myteam/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createSuper\";import _inherits from\"/Users/dante/Documents/SOURCE CODE/myteam/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";import React,{Component}from'react';import{Table,Spin,message,Popover,Tabs}from'antd';import{AppAPI}from'../../../api/appApi';var TabPane=Tabs.TabPane;var columns=[{title:'Mã nhân sự',width:120,dataIndex:'hrcode',key:'hrcode',fixed:'left'},{title:'Họ và tên',dataIndex:'fullname',key:'fullname',width:250,fixed:'left'},{title:'Vị trí công việc',dataIndex:'level',key:'level',width:300}];var Main=/*#__PURE__*/function(_Component){_inherits(Main,_Component);var _super=_createSuper(Main);function Main(){var _this;_classCallCheck(this,Main);for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++){args[_key]=arguments[_key];}_this=_super.call.apply(_super,[this].concat(args));_this.state={loading:true,fingerLog:\"\",dataSource:[],prefixName:\"\",columnState:[{title:'MNS',width:90,dataIndex:'hrcode',key:'hrcode',fixed:'left'},{title:'Họ và tên',dataIndex:'fullname',key:'fullname',width:200,fixed:'left'},{title:'Vị trí công việc',dataIndex:'level',key:'level',width:250}]};_this.fetchDataFromAPI=function(){AppAPI.getAllTimeKeeping().then(function(res){var data=res.data;var stt=0;var finger=\"\";if(data.success){data.data.map(function(res){stt+=1;var dayStt=0;var department=res.department!=null?res.department.department_name:\"[Không có]\";var obj={stt:stt,fullname:/*#__PURE__*/React.createElement(\"span\",{className:\"fw-600 fs-15\"},res.name),hrcode:_this.state.prefixName+res.fingerprint_code,level:res.department!=null?res.department.department_name:\"\"};res.timekeeping.data.forEach(function(day){dayStt+=1;var delay=day.log.in_out.checkin.delay!=0?/*#__PURE__*/React.createElement(\"span\",{className:\"co-red fw-bold\"},\" - \",day.log.in_out.checkin.delay):\"\";var earlier=day.log.in_out.checkout.earlier!=0?/*#__PURE__*/React.createElement(\"span\",{className:\"co-red fw-bold\"},\" - \",day.log.in_out.checkout.earlier):\"\";var content=/*#__PURE__*/React.createElement(Tabs,null,/*#__PURE__*/React.createElement(TabPane,{tab:\"T\\u1ED5ng h\\u1EE3p\",key:\"1\"},/*#__PURE__*/React.createElement(\"div\",null,\"C\\xF4ng l\\xE0m vi\\u1EC7c trong ng\\xE0y: \",/*#__PURE__*/React.createElement(\"span\",{className:\"fw-bold\"},day.log.work)),/*#__PURE__*/React.createElement(\"div\",null,\"Thu\\u1ED9c ph\\xF2ng ban: \",/*#__PURE__*/React.createElement(\"span\",null,department)),/*#__PURE__*/React.createElement(\"div\",null,\"Ca l\\xE0m vi\\u1EC7c: \",/*#__PURE__*/React.createElement(\"span\",null,\"Fulltime\")),/*#__PURE__*/React.createElement(\"div\",null,\"Gi\\u1EDD l\\xE0m vi\\u1EC7c: \",/*#__PURE__*/React.createElement(\"span\",null,\"09:00 - 17:30\")),/*#__PURE__*/React.createElement(\"div\",{className:\"fw-bold\"},\"Gi\\u1EDD v\\xE0o: \",/*#__PURE__*/React.createElement(\"span\",null,day.log.in_out.checkin.time),day.log.in_out.checkin.delay!=0&&/*#__PURE__*/React.createElement(\"span\",{className:\"co-red fw-bold\"},\" - \\u0110i mu\\u1ED9n: \",/*#__PURE__*/React.createElement(\"span\",null,day.log.in_out.checkin.delay))),/*#__PURE__*/React.createElement(\"div\",{className:\"fw-bold\"},\"Gi\\u1EDD ra: \",/*#__PURE__*/React.createElement(\"span\",null,day.log.in_out.checkout.time),day.log.in_out.checkout.earlier!=0&&/*#__PURE__*/React.createElement(\"span\",{className:\"co-red fw-bold\"},\" - V\\u1EC1 s\\u1EDBm: \",/*#__PURE__*/React.createElement(\"span\",null,day.log.in_out.checkout.earlier)))),/*#__PURE__*/React.createElement(TabPane,{tab:\"Ch\\u1ED1t v\\xE2n tay\",key:\"2\"},day.log.fingerprint.map(function(finger){return/*#__PURE__*/React.createElement(\"div\",{className:\"border-bottom-dashed p-5\"},\"Ch\\u1EA5m v\\xE2n tay l\\xFAc: \",/*#__PURE__*/React.createElement(\"span\",{className:\"fw-bold co-red\"},finger.datetime_at));})),/*#__PURE__*/React.createElement(TabPane,{tab:\"\\u0110\\u01A1n t\\u1EEB\",key:\"3\"},/*#__PURE__*/React.createElement(\"span\",null,\"Kh\\xF4ng c\\xF3 \\u0111\\u01A1n n\\xE0o\")),/*#__PURE__*/React.createElement(TabPane,{tab:\"Ph\\u1EA1t\",key:\"4\"},/*#__PURE__*/React.createElement(\"span\",null,\"Kh\\xF4ng b\\u1ECB ph\\u1EA1t\")));var html=/*#__PURE__*/React.createElement(Popover,{content:content,placement:\"bottom\",trigger:\"click\",title:res.name.toUpperCase()+\", NGÀY \"+day.day+\"/\"+res.timekeeping.month},/*#__PURE__*/React.createElement(\"div\",{className:\"border-bottom-dashed\"},day.log.in_out.checkin.time,delay),/*#__PURE__*/React.createElement(\"div\",{className:\"border-bottom-dashed\"},day.log.in_out.checkout.time,earlier));if(day.off){obj[dayStt]=/*#__PURE__*/React.createElement(\"div\",{className:\"text-center co-blue fw-bold\"},\"N\");}else{obj[dayStt]=html;}});_this.setState(function(prevState){return{dataSource:[].concat(_toConsumableArray(prevState.dataSource),[obj])};});});}else{message.error(data.msg);}}).catch(function(res){console.log(res.message);}).finally(function(res){_this.setState({loading:false});});};_this.fetchColumn=function(){AppAPI.getAllColumn().then(function(res){var data=res.data;var stt=0;if(data.success){data.data.dayInMonth.map(function(res){stt+=1;var obj={title:res.day+\"/\"+data.data.month+\" \"+res.dayOfWeek,dataIndex:res.day,key:res.day,width:170};_this.setState(function(prevState){return{columnState:[].concat(_toConsumableArray(prevState.columnState),[obj])};});});}else{message.error(data.msg);}return true;}).catch(function(res){return false;});};_this.fetchPrefixName=function(){AppAPI.getPrefixName().then(function(res){var data=res.data;var stt=0;if(data.success){_this.setState({prefixName:data.data});}else{message.error(data.msg);}return true;}).catch(function(res){return false;});};return _this;}_createClass(Main,[{key:\"componentDidMount\",value:function componentDidMount(){this.fetchColumn();this.fetchPrefixName();this.fetchDataFromAPI();}},{key:\"render\",value:function render(){var data=[];var _this$state=this.state,loading=_this$state.loading,dataSource=_this$state.dataSource,columnState=_this$state.columnState,prefixName=_this$state.prefixName;return/*#__PURE__*/React.createElement(\"section\",{className:\"main-dashboard main-dashboard--layout overflow-auto flex-1\"},/*#__PURE__*/React.createElement(Spin,{spinning:loading,tip:\"\\u0110ang t\\u1EA3i d\\u1EEF li\\u1EC7u\"},/*#__PURE__*/React.createElement(Table,{columns:columnState,dataSource:dataSource,pagination:false,bordered:true,scroll:{x:1500,y:'calc(100vh - 179px)'}})));}}]);return Main;}(Component);export default Main;","map":{"version":3,"sources":["/Users/dante/Documents/SOURCE CODE/myteam/src/components/site/dashboard/main.js"],"names":["React","Component","Table","Spin","message","Popover","Tabs","AppAPI","TabPane","columns","title","width","dataIndex","key","fixed","Main","state","loading","fingerLog","dataSource","prefixName","columnState","fetchDataFromAPI","getAllTimeKeeping","then","res","data","stt","finger","success","map","dayStt","department","department_name","obj","fullname","name","hrcode","fingerprint_code","level","timekeeping","forEach","day","delay","log","in_out","checkin","earlier","checkout","content","work","time","fingerprint","datetime_at","html","toUpperCase","month","off","setState","prevState","error","msg","catch","console","finally","fetchColumn","getAllColumn","dayInMonth","dayOfWeek","fetchPrefixName","getPrefixName","x","y"],"mappings":"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","sourcesContent":["import React, {\n    Component\n} from 'react';\n\nimport { Table, Spin, message, Popover, Tabs } from 'antd';\nimport { AppAPI } from '../../../api/appApi';\n\nconst { TabPane } = Tabs;\nconst columns = [\n    {\n        title: 'Mã nhân sự',\n        width: 120,\n        dataIndex: 'hrcode',\n        key: 'hrcode',\n        fixed: 'left',\n    },\n    {\n        title: 'Họ và tên',\n        dataIndex: 'fullname',\n        key: 'fullname',\n        width: 250,\n        fixed: 'left',\n    },\n    {\n        title: 'Vị trí công việc',\n        dataIndex: 'level',\n        key: 'level',\n        width: 300,\n    }\n];\n\nclass Main extends Component {\n    state = {\n        loading: true,\n        fingerLog: \"\",\n        dataSource: [],\n        prefixName: \"\",\n        columnState: [\n            {\n                title: 'MNS',\n                width: 90,\n                dataIndex: 'hrcode',\n                key: 'hrcode',\n                fixed: 'left',\n            },\n            {\n                title: 'Họ và tên',\n                dataIndex: 'fullname',\n                key: 'fullname',\n                width: 200,\n                fixed: 'left',\n            },\n            {\n                title: 'Vị trí công việc',\n                dataIndex: 'level',\n                key: 'level',\n                width: 250\n            }]\n    }\n    componentDidMount() {\n        this.fetchColumn();\n        this.fetchPrefixName();\n        this.fetchDataFromAPI();\n    }\n\n    render() {\n        const data = [];\n        const { loading, dataSource, columnState, prefixName } = this.state;\n\n        return (\n            <section className=\"main-dashboard main-dashboard--layout overflow-auto flex-1\">\n                <Spin spinning={loading} tip=\"Đang tải dữ liệu\">\n                    <Table columns={columnState} dataSource={dataSource} pagination={false} bordered scroll={{ x: 1500, y: 'calc(100vh - 179px)' }} \n                        \n                    />\n                </Spin>\n            </section>\n        );\n    }\n\n    fetchDataFromAPI = () => {\n        AppAPI.getAllTimeKeeping().then(res => {\n            const { data } = res;\n            var stt = 0;\n            var finger = \"\";\n            if (data.success) {\n                data.data.map(res => {\n                    stt += 1;\n                    var dayStt = 0;\n                    var department = res.department != null ? res.department.department_name : \"[Không có]\";\n                    let obj = {\n                        stt: stt,\n                        fullname: <span className=\"fw-600 fs-15\">{res.name}</span>,\n                        hrcode: this.state.prefixName + res.fingerprint_code,\n                        level: res.department != null ? res.department.department_name : \"\" \n                    };\n\n                    res.timekeeping.data.forEach(day => {\n                        dayStt += 1;\n                        const delay = (\n                            day.log.in_out.checkin.delay != 0 ? <span className=\"co-red fw-bold\"> - {day.log.in_out.checkin.delay}</span> : \"\"\n                        );\n                        const earlier = (\n                            day.log.in_out.checkout.earlier != 0 ? <span className=\"co-red fw-bold\"> - {day.log.in_out.checkout.earlier}</span> : \"\"\n                        );\n\n                        const content = (\n                            <Tabs>\n                                <TabPane tab=\"Tổng hợp\" key=\"1\">\n                                    <div>Công làm việc trong ngày: <span className=\"fw-bold\">{day.log.work}</span></div>\n                                    <div>Thuộc phòng ban: <span>{department}</span></div>\n                                    <div>Ca làm việc: <span>Fulltime</span></div>\n                                    <div>Giờ làm việc: <span>09:00 - 17:30</span></div>\n                                    <div className=\"fw-bold\">Giờ vào: <span>{day.log.in_out.checkin.time}</span>{day.log.in_out.checkin.delay != 0 && <span className=\"co-red fw-bold\"> - Đi muộn: <span>{day.log.in_out.checkin.delay}</span></span>}</div>\n                                    <div className=\"fw-bold\">Giờ ra: <span>{day.log.in_out.checkout.time}</span>{day.log.in_out.checkout.earlier != 0 && <span className=\"co-red fw-bold\"> - Về sớm: <span>{day.log.in_out.checkout.earlier}</span></span>}</div>\n                                </TabPane>\n                                <TabPane tab=\"Chốt vân tay\" key=\"2\">\n                                    {day.log.fingerprint.map(finger => {\n                                        return <div className=\"border-bottom-dashed p-5\">Chấm vân tay lúc: <span className=\"fw-bold co-red\">{finger.datetime_at}</span></div>\n                                    })}\n                                </TabPane>\n                                <TabPane tab=\"Đơn từ\" key=\"3\">\n                                    <span>Không có đơn nào</span>\n                                </TabPane>\n                                <TabPane tab=\"Phạt\" key=\"4\">\n                                    <span>Không bị phạt</span>\n                                </TabPane>\n                            </Tabs>\n                        );\n\n\n                        const html = (\n                            <Popover content={content} placement=\"bottom\" trigger=\"click\" title={res.name.toUpperCase() + \", NGÀY \" + day.day + \"/\" + res.timekeeping.month}>\n                                <div className=\"border-bottom-dashed\">{day.log.in_out.checkin.time}{delay}</div>\n                                <div className=\"border-bottom-dashed\">{day.log.in_out.checkout.time}{earlier}</div>\n                            </Popover>\n                        );\n\n                        if (day.off) {\n                            obj[dayStt] = <div className=\"text-center co-blue fw-bold\">N</div>;\n                        } else {\n                            obj[dayStt] = html;\n                        }\n\n\n                    });\n\n\n                    this.setState(prevState => ({\n                        dataSource: [...prevState.dataSource, obj]\n                    }));\n                });\n            } else {\n                message.error(data.msg);\n            }\n        }).catch(res => {\n            console.log(res.message);\n        }).finally(res => {\n            this.setState({ loading: false });\n        });\n    }\n\n    fetchColumn = () => {\n        AppAPI.getAllColumn().then(res => {\n            const { data } = res;\n            var stt = 0;\n            if (data.success) {\n                data.data.dayInMonth.map(res => {\n                    stt += 1;\n                    const obj = {\n                        title: res.day + \"/\" + data.data.month + \" \" + res.dayOfWeek,\n                        dataIndex: res.day,\n                        key: res.day,\n                        width: 170,\n                    };\n                    this.setState(prevState => ({\n                        columnState: [...prevState.columnState, obj]\n                    }));\n                });\n            } else {\n                message.error(data.msg);\n            }\n            return true;\n        }).catch(res => {\n            return false;\n        });\n    }\n\n    fetchPrefixName = () => {\n        AppAPI.getPrefixName().then(res => {\n            const { data } = res;\n            var stt = 0;\n            if (data.success) {\n                this.setState({ prefixName: data.data });\n            } else {\n                message.error(data.msg);\n            }\n            return true;\n        }).catch(res => {\n            return false;\n        });\n    }\n}\n\n\nexport default Main;"]},"metadata":{},"sourceType":"module"}