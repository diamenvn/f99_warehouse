{"ast":null,"code":"var _jsxFileName = \"/Users/onion9x/Documents/Source Code/f99_warehouse/src/components/site/setting/fingerprint/main.js\";\nimport React, { Component } from 'react';\nimport { FcAddDatabase, FcEmptyTrash } from 'react-icons/fc';\nimport { AiFillDelete } from 'react-icons/ai';\nimport { Tabs, Table, Button, Drawer, Row, Col, Form, Input, message, Spin, Tag, Popconfirm } from 'antd';\nimport { AppAPI } from '../../../../api/appApi';\nconst {\n  TabPane\n} = Tabs;\nconst columns = [{\n  title: 'STT',\n  dataIndex: 'stt',\n  key: 'stt',\n  width: 50\n}, {\n  title: 'API Gửi data',\n  dataIndex: 'api_value',\n  key: 'api_value',\n  width: 500\n}, {\n  title: 'Ngày tạo API',\n  dataIndex: 'created_at',\n  key: 'created_at',\n  width: 150\n}, {\n  title: 'Trạng thái',\n  dataIndex: 'status',\n  key: 'status',\n  width: 150\n}, {\n  title: 'Thao tác',\n  dataIndex: 'action',\n  key: 'action',\n  width: 150\n}];\n\nclass Main extends Component {\n  constructor(...args) {\n    super(...args);\n    this.state = {\n      loading: false,\n      listDeviceState: [],\n      emptyData: true,\n      nameDeviceState: \"\",\n      loading: false\n    };\n\n    this.fetchDataFromAPI = () => {\n      AppAPI.getAllDevice().then(res => {\n        const {\n          data\n        } = res;\n        var key = 0;\n\n        if (data.success) {\n          data.data.map(res => {\n            key += 1;\n            let apiKey = 0;\n            let dataSource = [];\n            res.api.map(resAPI => {\n              apiKey += 1;\n              let object = {\n                stt: apiKey,\n                api_value: AppAPI.BASE_URL + \"/api/v1/device/pushDataFromFingerprint/\" + resAPI.access_token,\n                created_at: resAPI.created_at,\n                status: resAPI.status == 1 ? /*#__PURE__*/React.createElement(Tag, {\n                  color: \"#87d068\",\n                  __self: this,\n                  __source: {\n                    fileName: _jsxFileName,\n                    lineNumber: 127,\n                    columnNumber: 58\n                  }\n                }, \"\\u0110ang ho\\u1EA1t \\u0111\\u1ED9ng\") : /*#__PURE__*/React.createElement(Tag, {\n                  color: \"#f50\",\n                  __self: this,\n                  __source: {\n                    fileName: _jsxFileName,\n                    lineNumber: 127,\n                    columnNumber: 102\n                  }\n                }, \"\\u0110\\xE3 t\\u1EA1m d\\u1EEBng\"),\n                action: /*#__PURE__*/React.createElement(AiFillDelete, {\n                  onClick: e => this.removeItemApi(resAPI),\n                  className: \"icon--hover-red\",\n                  __self: this,\n                  __source: {\n                    fileName: _jsxFileName,\n                    lineNumber: 128,\n                    columnNumber: 37\n                  }\n                })\n              };\n              dataSource.push(object);\n            });\n            const obj = /*#__PURE__*/React.createElement(TabPane, {\n              tab: res.device_name,\n              key: key,\n              __self: this,\n              __source: {\n                fileName: _jsxFileName,\n                lineNumber: 134,\n                columnNumber: 25\n              }\n            }, /*#__PURE__*/React.createElement(Table, {\n              locale: \"B\\u1EA1n ch\\u01B0a t\\u1EA1o API n\\xE0o \\u0111\\u1EC3 k\\u1EBFt n\\u1ED1i\",\n              pagination: false,\n              dataSource: dataSource,\n              columns: columns,\n              __self: this,\n              __source: {\n                fileName: _jsxFileName,\n                lineNumber: 135,\n                columnNumber: 29\n              }\n            }), /*#__PURE__*/React.createElement(\"div\", {\n              className: \"bottom p-5\",\n              __self: this,\n              __source: {\n                fileName: _jsxFileName,\n                lineNumber: 136,\n                columnNumber: 29\n              }\n            }, /*#__PURE__*/React.createElement(Popconfirm, {\n              onConfirm: e => this.removeDevice(res),\n              title: \"B\\u1EA1n c\\xF3 ch\\u1EAFc ch\\u1EAFn mu\\u1ED1n xo\\xE1\\uFF1F\",\n              okText: \"\\u0110\\u1ED3ng \\xFD\",\n              cancelText: \"Hu\\u1EF7 b\\u1ECF\",\n              __self: this,\n              __source: {\n                fileName: _jsxFileName,\n                lineNumber: 137,\n                columnNumber: 33\n              }\n            }, /*#__PURE__*/React.createElement(Button, {\n              className: \"px-5\",\n              type: \"primary\",\n              danger: true,\n              __self: this,\n              __source: {\n                fileName: _jsxFileName,\n                lineNumber: 138,\n                columnNumber: 37\n              }\n            }, /*#__PURE__*/React.createElement(FcAddDatabase, {\n              __self: this,\n              __source: {\n                fileName: _jsxFileName,\n                lineNumber: 138,\n                columnNumber: 84\n              }\n            }), \"Xo\\xE1 m\\xE1y ch\\u1EA5m c\\xF4ng\")), /*#__PURE__*/React.createElement(Button, {\n              className: \"ml-10\",\n              onClick: e => this.addApi(res),\n              type: \"primary\",\n              __self: this,\n              __source: {\n                fileName: _jsxFileName,\n                lineNumber: 140,\n                columnNumber: 33\n              }\n            }, /*#__PURE__*/React.createElement(FcAddDatabase, {\n              __self: this,\n              __source: {\n                fileName: _jsxFileName,\n                lineNumber: 140,\n                columnNumber: 108\n              }\n            }), \"Th\\xEAm m\\u1EDBi API\")));\n            this.setState(prevState => ({\n              listDeviceState: [...prevState.listDeviceState, obj]\n            }));\n          });\n\n          if (data.data.length > 0) {\n            this.setState({\n              emptyData: false\n            });\n          }\n        }\n      });\n    };\n\n    this.addDevice = e => {\n      const {\n        nameDeviceState\n      } = this.state;\n\n      if (!!!nameDeviceState) {\n        message.error(\"Vui lòng nhập tên thiết bị!\");\n        return;\n      }\n\n      let data = {\n        name: nameDeviceState\n      };\n      AppAPI.addDevice(data).then(res => {\n        const {\n          data\n        } = res;\n\n        if (data.success) {\n          message.success(data.msg);\n          window.location.reload();\n        } else {\n          message.error(data.msg);\n        }\n      }).catch(res => {\n        message.error(res.message);\n      });\n    };\n\n    this.addApi = e => {\n      let data = {\n        _id: e._id\n      };\n      AppAPI.addApiReciverData(data).then(res => {\n        const {\n          data\n        } = res;\n\n        if (data.success) {\n          message.success(data.msg);\n          window.location.reload();\n        } else {\n          message.error(data.msg);\n        }\n      }).catch(res => {\n        message.error(res.message);\n      });\n    };\n\n    this.removeDevice = e => {\n      let data = {\n        _id: e._id\n      };\n      AppAPI.removeDevice(data).then(res => {\n        const {\n          data\n        } = res;\n\n        if (data.success) {\n          message.success(data.msg);\n          window.location.reload();\n        } else {\n          message.error(data.msg);\n        }\n      }).catch(res => {\n        message.error(res.message);\n      });\n    };\n\n    this.removeItemApi = e => {\n      let data = {\n        _id: e._id,\n        device_id: e.device_id\n      };\n      AppAPI.removeItemAPI(data).then(res => {\n        const {\n          data\n        } = res;\n\n        if (data.success) {\n          message.success(data.msg);\n          window.location.reload();\n        } else {\n          message.error(data.msg);\n        }\n      }).catch(res => {\n        message.error(res.message);\n      });\n    };\n\n    this.changeNameDevice = e => {\n      this.setState({\n        nameDeviceState: e.target.value\n      });\n    };\n\n    this.onClose = () => {\n      this.props.toogleClickAdd();\n    };\n  }\n\n  componentDidMount() {\n    this.fetchDataFromAPI();\n  }\n\n  render() {\n    const empty = /*#__PURE__*/React.createElement(\"h3\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 59,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(FcEmptyTrash, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 59,\n        columnNumber: 17\n      }\n    }), \"Kh\\xF4ng c\\xF3 m\\xE1y ch\\u1EA5m c\\xF4ng n\\xE0o, b\\u1EA1n h\\xE3y th\\xEAm m\\xE1y m\\u1EDBi \\u0111\\u1EC3 b\\u1EAFt \\u0111\\u1EA7u s\\u1EED d\\u1EE5ng\");\n    const {\n      listDeviceState,\n      emptyData,\n      nameDeviceState,\n      loading\n    } = this.state;\n    const {\n      clickAdd\n    } = this.props;\n    return /*#__PURE__*/React.createElement(\"section\", {\n      className: \"main-dashboard main-dashboard--layout flex-1\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 64,\n        columnNumber: 13\n      }\n    }, !emptyData ? /*#__PURE__*/React.createElement(\"div\", {\n      className: \"card-container\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 66,\n        columnNumber: 21\n      }\n    }, /*#__PURE__*/React.createElement(Spin, {\n      spinning: loading,\n      tip: \"Loading...\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 67,\n        columnNumber: 25\n      }\n    }, /*#__PURE__*/React.createElement(Tabs, {\n      type: \"card\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 68,\n        columnNumber: 29\n      }\n    }, listDeviceState))) : /*#__PURE__*/React.createElement(\"div\", {\n      className: \"d-flex p-10\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 73,\n        columnNumber: 21\n      }\n    }, empty), /*#__PURE__*/React.createElement(Drawer, {\n      title: \"Th\\xEAm m\\xE1y ch\\u1EA5m c\\xF4ng\",\n      width: 300,\n      visible: clickAdd,\n      onClose: this.onClose,\n      bodyStyle: {\n        paddingBottom: 80\n      },\n      footer: /*#__PURE__*/React.createElement(\"div\", {\n        style: {\n          textAlign: 'right'\n        },\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 84,\n          columnNumber: 25\n        }\n      }, /*#__PURE__*/React.createElement(Button, {\n        type: \"primary\",\n        onClick: e => this.addDevice(e),\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 89,\n          columnNumber: 29\n        }\n      }, \"Th\\xEAm m\\u1EDBi\")),\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 77,\n        columnNumber: 17\n      }\n    }, /*#__PURE__*/React.createElement(Row, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 94,\n        columnNumber: 21\n      }\n    }, /*#__PURE__*/React.createElement(Col, {\n      span: 24,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 95,\n        columnNumber: 25\n      }\n    }, /*#__PURE__*/React.createElement(Form.Item, {\n      name: \"name\",\n      label: \"T\\xEAn m\\xE1y ch\\u1EA5m c\\xF4ng\",\n      rules: [{\n        required: true,\n        message: 'Please enter user name'\n      }],\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 96,\n        columnNumber: 29\n      }\n    }, /*#__PURE__*/React.createElement(Input, {\n      value: nameDeviceState,\n      onChange: e => this.changeNameDevice(e),\n      placeholder: \"Nh\\u1EADp t\\xEAn m\\xE1y ch\\u1EA5m c\\xF4ng v\\xE0o \\u0111\\xE2y\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 101,\n        columnNumber: 33\n      }\n    }))))));\n  }\n\n}\n\nexport default Main;","map":{"version":3,"sources":["/Users/onion9x/Documents/Source Code/f99_warehouse/src/components/site/setting/fingerprint/main.js"],"names":["React","Component","FcAddDatabase","FcEmptyTrash","AiFillDelete","Tabs","Table","Button","Drawer","Row","Col","Form","Input","message","Spin","Tag","Popconfirm","AppAPI","TabPane","columns","title","dataIndex","key","width","Main","state","loading","listDeviceState","emptyData","nameDeviceState","fetchDataFromAPI","getAllDevice","then","res","data","success","map","apiKey","dataSource","api","resAPI","object","stt","api_value","BASE_URL","access_token","created_at","status","action","e","removeItemApi","push","obj","device_name","removeDevice","addApi","setState","prevState","length","addDevice","error","name","msg","window","location","reload","catch","_id","addApiReciverData","device_id","removeItemAPI","changeNameDevice","target","value","onClose","props","toogleClickAdd","componentDidMount","render","empty","clickAdd","paddingBottom","textAlign","required"],"mappings":"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","sourcesContent":["import React, {\n    Component\n} from 'react';\nimport { FcAddDatabase, FcEmptyTrash } from 'react-icons/fc';\nimport { AiFillDelete } from 'react-icons/ai';\nimport { Tabs, Table, Button, Drawer, Row, Col, Form, Input, message, Spin, Tag, Popconfirm } from 'antd';\nimport { AppAPI } from '../../../../api/appApi';\n\nconst { TabPane } = Tabs;\n\nconst columns = [\n    {\n        title: 'STT',\n        dataIndex: 'stt',\n        key: 'stt',\n        width: 50\n    },\n    {\n        title: 'API Gửi data',\n        dataIndex: 'api_value',\n        key: 'api_value',\n        width: 500\n    },\n    {\n        title: 'Ngày tạo API',\n        dataIndex: 'created_at',\n        key: 'created_at',\n        width: 150\n    },\n    {\n        title: 'Trạng thái',\n        dataIndex: 'status',\n        key: 'status',\n        width: 150\n    },\n    {\n        title: 'Thao tác',\n        dataIndex: 'action',\n        key: 'action',\n        width: 150\n    },\n];\n\nclass Main extends Component {\n    state = {\n        loading: false,\n        listDeviceState: [],\n        emptyData: true,\n        nameDeviceState: \"\",\n        loading: false\n    }\n\n    componentDidMount() {\n        this.fetchDataFromAPI();\n    }\n\n    render() {\n        const empty = (\n            <h3><FcEmptyTrash />Không có máy chấm công nào, bạn hãy thêm máy mới để bắt đầu sử dụng</h3>\n        );\n        const { listDeviceState, emptyData, nameDeviceState, loading } = this.state;\n        const { clickAdd } = this.props;\n        return (\n            <section className=\"main-dashboard main-dashboard--layout flex-1\">\n                {!emptyData ?\n                    <div className=\"card-container\">\n                        <Spin spinning={loading} tip=\"Loading...\">\n                            <Tabs type=\"card\">\n                                {listDeviceState}\n                            </Tabs>\n                        </Spin>\n                    </div> :\n                    <div className=\"d-flex p-10\">\n                        {empty}\n                    </div>\n                }\n                <Drawer\n                    title=\"Thêm máy chấm công\"\n                    width={300}\n                    visible={clickAdd}\n                    onClose={this.onClose}\n                    bodyStyle={{ paddingBottom: 80 }}\n                    footer={\n                        <div\n                            style={{\n                                textAlign: 'right',\n                            }}\n                        >\n                            <Button type=\"primary\" onClick={(e) => this.addDevice(e)}>\n                                Thêm mới\n                            </Button>\n                        </div>\n                    }>\n                    <Row>\n                        <Col span={24}>\n                            <Form.Item\n                                name=\"name\"\n                                label=\"Tên máy chấm công\"\n                                rules={[{ required: true, message: 'Please enter user name' }]}\n                            >\n                                <Input value={nameDeviceState} onChange={(e) => this.changeNameDevice(e)} placeholder=\"Nhập tên máy chấm công vào đây\" />\n                            </Form.Item>\n                        </Col>\n                    </Row>\n                </Drawer>\n            </section>\n\n        );\n\n    }\n\n    fetchDataFromAPI = () => {\n        AppAPI.getAllDevice().then(res => {\n            const { data } = res;\n            var key = 0;\n            if (data.success) {\n                data.data.map(res => {\n                    key += 1;\n                    let apiKey = 0;\n                    let dataSource = [];\n                    res.api.map(resAPI => {\n                        apiKey += 1;\n                        let object = {\n                            stt: apiKey,\n                            api_value: AppAPI.BASE_URL + \"/api/v1/device/pushDataFromFingerprint/\" + resAPI.access_token,\n                            created_at: resAPI.created_at,\n                            status: resAPI.status == 1 ? <Tag color=\"#87d068\">Đang hoạt động</Tag> : <Tag color=\"#f50\">Đã tạm dừng</Tag>,\n                            action: <AiFillDelete onClick={(e) => this.removeItemApi(resAPI)} className=\"icon--hover-red\" />\n                        }\n                        dataSource.push(object);\n                    });\n\n                    const obj = (\n                        <TabPane tab={res.device_name} key={key} >\n                            <Table locale=\"Bạn chưa tạo API nào để kết nối\" pagination={false} dataSource={dataSource} columns={columns} />\n                            <div className=\"bottom p-5\">\n                                <Popconfirm onConfirm={(e) => this.removeDevice(res)} title=\"Bạn có chắc chắn muốn xoá？\" okText=\"Đồng ý\" cancelText=\"Huỷ bỏ\">\n                                    <Button className=\"px-5\" type=\"primary\" danger><FcAddDatabase />Xoá máy chấm công</Button>\n                                </Popconfirm>\n                                <Button className=\"ml-10\" onClick={(e) => this.addApi(res)} type=\"primary\"><FcAddDatabase />Thêm mới API</Button>\n                            </div>\n                        </TabPane>\n                    );\n                    this.setState(prevState => ({\n                        listDeviceState: [...prevState.listDeviceState, obj]\n                    }));\n                });\n                if (data.data.length > 0) {\n                    this.setState({ emptyData: false });\n                }\n            }\n        });\n    }\n\n    addDevice = e => {\n        const { nameDeviceState } = this.state;\n        if (!!!nameDeviceState) {\n            message.error(\"Vui lòng nhập tên thiết bị!\");\n            return;\n        }\n\n        let data = {\n            name: nameDeviceState\n        };\n        AppAPI.addDevice(data).then(res => {\n            const { data } = res;\n            if (data.success) {\n                message.success(data.msg);\n                window.location.reload();\n            } else {\n                message.error(data.msg);\n            }\n        }).catch(res => {\n            message.error(res.message);\n        });\n    }\n\n    addApi = e => {\n        let data = {\n            _id: e._id\n        };\n        AppAPI.addApiReciverData(data).then(res => {\n            const { data } = res;\n            if (data.success) {\n                message.success(data.msg);\n                window.location.reload();\n            } else {\n                message.error(data.msg);\n            }\n        }).catch(res => {\n            message.error(res.message);\n        });\n    }\n\n    removeDevice = (e) => {\n        let data = {\n            _id: e._id\n        };\n        AppAPI.removeDevice(data).then(res => {\n            const { data } = res;\n            if (data.success) {\n                message.success(data.msg);\n                window.location.reload();\n            } else {\n                message.error(data.msg);\n            }\n        }).catch(res => {\n            message.error(res.message);\n        });\n    }\n\n    removeItemApi = (e) => {\n        let data = {\n            _id: e._id,\n            device_id: e.device_id\n        };\n        AppAPI.removeItemAPI(data).then(res => {\n            const { data } = res;\n            if (data.success) {\n                message.success(data.msg);\n                window.location.reload();\n            } else {\n                message.error(data.msg);\n            }\n        }).catch(res => {\n            message.error(res.message);\n        });\n    }\n\n    changeNameDevice = e => {\n        this.setState({\n            nameDeviceState: e.target.value\n        });\n    }\n\n    onClose = () => {\n        this.props.toogleClickAdd();\n    };\n}\n\n\nexport default Main;"]},"metadata":{},"sourceType":"module"}